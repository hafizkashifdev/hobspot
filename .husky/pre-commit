#!/bin/sh

echo "ğŸ” Running pre-commit checks..."

# âœ… Format with Prettier
echo "ğŸ¨ Formatting files with Prettier..."
npx prettier --write . || {
  echo "âŒ Prettier formatting failed."
  exit 1
}

# âœ… Lint with ESLint
echo "ğŸ” Linting project with ESLint..."
npm run lint || {
  echo "âŒ ESLint failed."
  exit 1
}

# âœ… Check for console.log / debugger
echo "ğŸš« Checking for console.log/debugger..."
if grep -rE "console\\.log|debugger" ./src; then
  echo "âŒ console.log or debugger found! Remove before committing."
  exit 1
fi

# âœ… Try to build the project
echo "ğŸ—ï¸ Building project..."
npm run build > /dev/null || {
  echo "âŒ Build failed. Fix before committing."
  exit 1
}

echo "âœ… All checks passed. Proceeding with commit."
